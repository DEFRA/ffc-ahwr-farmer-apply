version: '3.8'

services:
  wdio-cucumber:
    build: .
    image: ffc-ahwr-farmer-apply-acceptance
    volumes:
      - ./test-output:/home/node/test-output

  axe:
    image: ffc-ahwr-farmer-apply-acceptance
  
    command: sh -c "/scripts/wait ffc-demo-apply-web:3000 -- axe --exclude ".govuk-skip-link,.govuk-breadcrumbs"  --chrome-options="no-sandbox,disable-setuid-sandbox,disable-dev-shm-usage" --chromedriver-path=/usr/bin/chromedriver --exit ffc-demo-apply-web:3000, ffc-demo-apply-web:3000/claim/name, ffc-demo-apply-web:3000/claim/property, ffc-demo-apply-web:3000/claim/accessible, ffc-demo-apply-web:3000/claim/mine-type, ffc-demo-apply-web:3000/claim/date-of-subsidence, ffc-demo-apply-web:3000/claim/email, ffc-demo-apply-web:3000/claim/confirmation"
    volumes:
      - ./test-output:/test-output
      - ./scripts:/scripts
      - ./accessibilty-report
